(this["webpackJsonplecture-estimation"]=this["webpackJsonplecture-estimation"]||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var c=a(4),s=a.n(c),n=a(32),r=a.n(n),i=(a(38),a(39),{1:a.p+"static/media/confused.db9b8efb.svg",2:a.p+"static/media/sad.8471fa19.svg",3:a.p+"static/media/calm.fe61c2af.svg",4:a.p+"static/media/satisfied.8c5e0f39.svg",5:a.p+"static/media/love.71b52726.svg"}),l=a(24);l.a.initializeApp({apiKey:"AIzaSyCmGyCwto2RFCqfomEenIHSxRZtySRLKxA",authDomain:"lecture-estimation.firebaseapp.com",databaseURL:"https://lecture-estimation-default-rtdb.europe-west1.firebasedatabase.app",projectId:"lecture-estimation",storageBucket:"lecture-estimation.appspot.com",messagingSenderId:"356803054194",appId:"1:356803054194:web:a4dc1d53b58aef702450eb",measurementId:"G-1132TD6D91"}),l.a.firestore().settings({timestampsInSnapshots:!0});var u=l.a,o=a(15),d=a(16),m=a(18),j=a(17),b=a(5),h=function(e){Object(m.a)(a,e);var t=Object(j.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).state={title:""},c}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;u.database().ref("/lectures/"+this.props.lectureId).once("value",(function(t){e.setState({title:t.val().name})}))}},{key:"render",value:function(){return Object(b.jsx)("h1",{className:"lecture-title",children:this.state.title})}}]),a}(c.Component),p=function(e){Object(m.a)(a,e);var t=Object(j.a)(a);function a(e){var c;Object(o.a)(this,a),(c=t.call(this,e)).handleChange=function(e){c.setState({reaction:e.target.value,disabled:!0}),u.database().ref("/lectures/"+c.props.lectureId+"/estimations/"+e.target.value).get().then((function(e){return e.getRef().set(e.val()+1)})),localStorage.setItem(c.props.lectureId,e.target.value-0)};var s=localStorage.getItem(c.props.lectureId);return c.state={reaction:s,disabled:null!==s},c}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=Object.keys(i).map((function(t){return Object(b.jsxs)("div",{className:"reactions__radio-wrapper",children:[Object(b.jsx)("input",{className:"reactions__radio",type:"radio",name:"reaction",id:"reaction-"+t,value:t,onChange:e.handleChange,disabled:e.state.disabled,checked:t==e.state.reaction?"checked":""}),Object(b.jsx)("label",{className:"reactions__label",for:"reaction-"+t,children:Object(b.jsx)("img",{src:i[t]})})]})}));return Object(b.jsx)("form",{className:"reactions",children:t})}}]),a}(c.Component),f=function(e){Object(m.a)(a,e);var t=Object(j.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).state={lectures:[]},c}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=u.database().ref("lectures/"+this.props.lectureId+"/estimations");t.once("value",(function(t){var a=[];t.forEach((function(e){a.push({key:e.key,val:e.val()})})),e.setState({lectures:a})})),t.on("child_changed",(function(t){var a=e.state.lectures.reduce((function(e,a){return e.concat(a.key==t.key?{key:a.key,val:t.val()}:a)}),[]);e.setState({lectures:a})}))}},{key:"render",value:function(){var e=this.state.lectures.reduce((function(e,t){return e+parseInt(t.val)}),0),t=this.state.lectures.map((function(t){return Object(b.jsxs)("li",{className:"results__item",children:[Object(b.jsx)("img",{className:"results__icon",src:i[t.key]}),Object(b.jsx)("span",{className:"results__span",style:{width:Math.round(t.val/e*100)+"%"},children:t.val})]})}));return Object(b.jsxs)("div",{className:"results",children:[Object(b.jsx)("h2",{children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"}),Object(b.jsx)("ul",{className:"results__items",children:t})]})}}]),a}(c.Component);var v=function(e){return Object(b.jsxs)("div",{className:"lecture",children:[Object(b.jsx)(h,{lectureId:e.match.params.lectureId}),Object(b.jsx)(p,{lectureId:e.match.params.lectureId}),Object(b.jsx)(f,{lectureId:e.match.params.lectureId})]})},O=a(21),x=function(e){Object(m.a)(a,e);var t=Object(j.a)(a);function a(e){var c;return Object(o.a)(this,a),(c=t.call(this,e)).state={lectures:[]},c}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;u.database().ref("/lectures").once("value",(function(t){var a=[];t.forEach((function(e){a.push({key:e.key,name:e.val().name})})),e.setState({lectures:a})}))}},{key:"render",value:function(){var e=this.state.lectures.map((function(e){return Object(b.jsx)("li",{className:"lecture-list__item",children:Object(b.jsx)("h2",{children:Object(b.jsx)(O.b,{to:"/lecture-estimation/lecture/"+e.key,children:e.name})})})}));return Object(b.jsxs)("div",{className:"lecture-list",children:[Object(b.jsx)("h1",{className:"lecture-list__title",children:"\u041b\u0435\u043a\u0446\u0438\u0438"}),Object(b.jsx)("ul",{className:"lecture-list__items",children:e})]})}}]),a}(c.Component),g=a(9);var y=function(){return Object(b.jsx)("main",{className:"main",children:Object(b.jsxs)(g.c,{children:[Object(b.jsx)(g.a,{exact:!0,path:"/lecture-estimation/",component:x}),Object(b.jsx)(g.a,{path:"/lecture-estimation/lecture/:lectureId",component:v})]})})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,49)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(O.a,{children:Object(b.jsx)(y,{})})}),document.getElementById("root")),I()}},[[48,1,2]]]);
//# sourceMappingURL=main.f05d0081.chunk.js.map